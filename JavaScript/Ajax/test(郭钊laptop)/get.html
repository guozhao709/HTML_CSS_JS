<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      div {
        width: 300px;
        height: 300px;
        border: 1px solid red;
      }
    </style>
  </head>
  <body>
    <button>点击发送请求</button>
    <div></div>

    <script>
      const btn = document.querySelector("button");
      const div = document.querySelector("div");

      btn.addEventListener("click", function (e) {
        // 1. 创建一个 XMLHttpRequest 对象
        const xhr = new XMLHttpRequest();
        // 2. 初始化请求, 设置请求方法和 url
        xhr.open("GET", "http://127.0.0.1:8000/server");
/*
设置url的参数
xhr.open("GET", "http://127.0.0.1:8000/server?name=tom&age=20");
                // 用 ? 分隔
                // 用 & 连接参数
*/
        // 3. 发送请求
        xhr.send();
        // 4. 事件绑定, 处理服务端的返回结果: 0(未初始化), 1(open完成), 2(send完成), 3(返回部分数据), 4(返回全部数据)
        xhr.onreadystatechange = function () {
        // 5. 判断请求是否完成
          if (xhr.readyState === 4) {
            if (xhr.status >= 200 && xhr.status < 300) {
                // 6. 处理服务端返回的数据
              div.innerHTML = xhr.response;
            }
          } else {
            console.log("请求失败");
          }
        };
      });
    </script>
  </body>
</html>
