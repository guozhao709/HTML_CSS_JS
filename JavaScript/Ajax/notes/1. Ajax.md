# Ajax

## 介绍

Ajax（Asynchronous JavaScript and XML）是一种用于创建异步 Web 应用程序的技术。它允许网页在不重新加载整个页面的情况下与服务器交换数据，从而实现更快、更动态的用户体验。

### XML 介绍

XML（Extensible Markup Language）是一种标记语言，用于定义数据结构和语义。它是一种可扩展的语言，允许用户定义自己的标签，并通过这些标签来描述数据。

XML 被设计用来传输数据和存储数据

```XML
<person>
  <name>John</name>
  <age>30</age>
  <city>New York</city>
</person>
```

在 Web 应用程序中，XML 通常用于与服务器进行数据交换。虽然**现在 JSON 更常用**，但 XML 仍然在某些情况下被使用，尤其是在需要严格的数据结构时。

## 特点

### 优点

可以无需刷新页面与服务端进行通信

允许你根据用户事件来更新部分页面内容

### 缺点

没有浏览历史, 不能回退

存在跨域问题

SEO(Search Engine Optimization) 不友好


## 如何解决跨域

### jsonp

原理: 通过 script 标签的 src 属性发送请求, 服务器返回一个函数调用, 然后在客户端执行这个函数, 这样就实现了跨域请求。

缺点: 只支持 get 请求, 不能发送复杂的请求数据。

客户端

```html
<script src="http://example.com/api?callback=handleData"></script>

<script>
  function handleData(data) {
    // do something with the data
  }
</script>
```

服务端

```javascript
app.all("/json-server", (req, res) => {
  const data = {};

  res.end(`handleData(${JSON.stringify(data)})`);
});
```

### CORS

CORS（Cross-Origin Resource Sharing）是一种机制，它使用额外的 HTTP 头来告诉浏览器，让运行在一个 origin (域名) 上的 Web 应用被允许访问来自不同源服务器上的指定的资源。

它的特点是不需要在客户端做任何特殊处理，只需要服务端配置正确。
